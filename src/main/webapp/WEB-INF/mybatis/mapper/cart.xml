<?xml version="1.0" encoding="euc-kr" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
					 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
					 
<mapper namespace="com.mycompany.webapp.dao.CartDao">
	<select id="selectAll" resultType="cart">
		select c.product_no as productNo, 
					 c.user_id as userId, 
					 c.amount, 
					 c.price as allprice, 
					 c.regdate,
					 p.product_name as productName, 
					 p.product_price as price,
					 i.img_oname as imgOname, 
					 i.img_sname as imgSname, 
					 i.img_type as imgType
		from cart c, users u, products p, products_img i
		where c.product_no = p.product_no
			and p.product_no = i.product_no
			and c.user_id = u.user_id
		order by regdate
	</select>
	
	<insert id="insert" parameterType="cart">
		insert into cart
		(product_no, user_id, amount, price, regdate)
		values
		(#{productNo}, #{userId}, #{amount}, #{price}, sysdate)
	</insert>
	
	<delete id="deleteCart" parameterType="cart">
		delete from cart
		where product_no = #{productNo) and user_id = #{userId}
	</delete>
	
	<select id="count" resultType="int">
		select count(*) from cart
	</select>
	
</mapper>