<?xml version="1.0" encoding="euc-kr" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
					 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
					 
<mapper namespace="productsRefund">
	<select id="selectAll" resultType="productsRefund">
		select order_no, refund_state, refund_date, refund_reason
		from products_refund
		order by regdate desc
	</select>
	
	<insert id="insert" parameterType="productsRefund">
		<selectKey keyProperty="order_no" resultType="int" order="BEFORE">
			select order_no from orders
		</selectKey>
		
		insert into products_refund
		value
		(order_no, 0, refund_date, refund_reason)
	</insert>
	
	<!-- <update id="update" parameterType="productsRefund"></update> -->
	
	<delete id="deleteRefund" parameterType="int">
		delete from products_refund
		where order_no = #{order_no}
	</delete>
</mapper>